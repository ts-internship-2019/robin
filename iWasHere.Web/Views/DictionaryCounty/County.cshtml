<h1>Lista judete</h1>
@(Html.Kendo().Button()
        .Name("iconTextButton")
        .Tag("a")
        .Icon("filter")
        .Content("Filtreaza")
        .HtmlAttributes(new { id = "btnFilter", type = "button" })
        .Events(e => e.Click("refresh"))
)

@(Html.Kendo().Button()
        .Name("kendoIconTextButton")
        .Tag("a")
        .Icon("filter-clear")
        .Content("Sterge filtru")
        .HtmlAttributes(new { id = "btnResetFilter", type = "button" })
        .Events(e => e.Click("removeFilter"))
)

@(Html.Kendo().TextBox()
    .Name("inputCountyNameFilter")
    .HtmlAttributes(new { id = "inputTextbox", type = "textbox" })
)

@(Html.Kendo().ComboBox()
          .Name("countryFilter")
          .DataTextField("CountryName")
          .DataValueField("CountryId")
          .DataSource(source =>
                  {
                      source.Read(read =>
                      {
                          read.Action("cmbCountry", "DictionaryCounty");
              });
          })
          .HtmlAttributes(new { id = "cmbCountryFilter"/*, style = "width: 100%" */})
)
<br />
<br />
@(Html.Kendo().Grid<iWasHere.Domain.Models.DictionaryCounty>()
        .Name("CountyGrid")
        .Columns(columns =>
        {
            //columns.Bound(c => c.CountyId);
            columns.Bound(c => c.CountyName).Title("Judet");
            //columns.Bound(c => c.CountryId);
            columns.Bound(c => c.Country.CountryName).Title("Tara");
            columns.Command(command => { command.Edit();  command.Destroy(); }).Width(200);
        })
        .HtmlAttributes(new {id = "CountyGrid", style = "height: 550px;" })
        .Scrollable()
        .Editable(editable => editable.Mode(GridEditMode.InLine))
        //.Groupable()
        //.Filterable(ftb => ftb.Mode(GridFilterMode.Row))
        .Sortable()
        .Pageable()
        .DataSource(dataSource => dataSource

            .Ajax()
            .Model(model => model.Id(p => p.CountyId))
            .Read(read => read.Action("County_Read", "DictionaryCounty").Data("getFilter"))
            .Create(create => create.Action("County_Create", "DictionaryCounty"))
            .Destroy(destroy => destroy.Action("County_Destroy", "DictionaryCounty"))
            .PageSize(20)
        )
)

<script>

    getFilter = function () {
        var model = {};
        model["txtboxCountyName"] = $("#inputTextbox").val();
        model["cmbboxCountryName"] = $("#cmbCountryFilter").val();
        return model;
    }

    removeFilter = function () {
        $("#inputTextbox").val("");
        $("#cmbCountryFilter").data("kendoComboBox").value("");
        refresh();
    }

    refresh = function () {
        $("#CountyGrid").data("kendoGrid").dataSource.read();
        $("#CountyGrid").data("kendoGrid").dataSource.page(1);
    }

        saveChanges = function () {
            grid = $("#CountyGrid").data("kendoGrid");
            grid.removeRow($(element).closest("tr"));
            grid.dataSource.sync();
        }

</script>